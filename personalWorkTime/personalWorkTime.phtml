<?php
$workdata = $model->getworkdata();
?>
<!DOCTYPE html>
<html lang="ja">
	<head>
		<meta charset="UTF-8">
		<link rel="stylesheet" href="../css/design.css">
		<link rel="stylesheet" href="../css/content.css">
		<script src="../jquery/jquery-1.11.3.min.js"></script>
		<script src="../script/workTime.js"></script>
		<script>
		function formChange(){
			radio = document.getElementsByName('work')
			if(radio[0].checked) {

				//フォーム
				document.getElementById('formYear').style.display = "";
				document.getElementById('formMonth').style.display = "none";
				document.getElementById('formWeek').style.display = "none";
				document.getElementById('formDay').style.display = "none";
				document.getElementById('formPeriod').style.display = "none";

			}else if(radio[1].checked) {

				//フォーム
				document.getElementById('formYear').style.display = "";
				document.getElementById('formMonth').style.display = "";
				document.getElementById('formWeek').style.display = "none";
				document.getElementById('formDay').style.display = "none";
				document.getElementById('formPeriod').style.display = "none";

			}else if(radio[2].checked) {

				//フォーム
				document.getElementById('formYear').style.display = "";
				document.getElementById('formMonth').style.display = "";
				document.getElementById('formWeek').style.display = "";
				document.getElementById('formDay').style.display = "none";
				document.getElementById('formPeriod').style.display = "none";

			}else if(radio[3].checked) {

				//フォーム
				document.getElementById('formYear').style.display = "none";
				document.getElementById('formMonth').style.display = "none";
				document.getElementById('formWeek').style.display = "none";
				document.getElementById('formDay').style.display = "";
				document.getElementById('formPeriod').style.display = "none";

			}else if(radio[4].checked) {

				//フォーム
				document.getElementById('formYear').style.display = "none";
				document.getElementById('formMonth').style.display = "none";
				document.getElementById('formWeek').style.display = "none";
				document.getElementById('formDay').style.display = "none";
				document.getElementById('formPeriod').style.display = "";

			}
		}

		//オンロードさせ、リロード時に選択を保持
		window.onload = formChange;
		</script>
		<title>勤務時間表(個人)画面</title>
	</head>
	<body>
		<div class="container">
			<header class="box">
				<h1 class="title">勤怠管理システム</h1>
			</header>

			<div class="box width70 clearfix">
				<div class="userInfo float-left">
					<p>ユーザー名 : admin / 権限 : 管理者</p>
				</div>
				<div class="userInfo float-right">
					<p><a href="../login/login.php">ログアウト</a></p>
				</div>
			</div>

			<div class="box menu"><!-- ヘッダーメニュー-->
				<ul id="dropmenu">
	 				<li><a href="../mainMenu/mainMenu.php">メニュー</a>
						<ul>
	    				</ul>
	 				</li>
	  				<li><a href="../overallWorkTime/overallWorkTime.php">勤務時間表</a>
	   					<ul>
	   					</ul>
	 				</li>
	 				<li><a href="../settingHoliday/settingHoliday.php">休日設定</a>
	    				<ul>
	   					</ul>
	 				</li>
	  				<li><a href="#">ユーザー設定</a>
	   					<ul>
	     					<li><a href="../updateUser/updateUser.php">ユーザー設定変更</a></li>
	     					<li><a href="../insertUser/insertUser.php">ユーザー登録</a></li>
	   					</ul>
	  				</li>
	  				<li><a href="../settingRestTime/settingRestTime.php">休憩時間設定</a>
	   					<ul>
	   					</ul>
	  				</li>
				</ul>
			</div>

			<div class="box main-container">
				<div class="workTime">
					<p>勤務時間表</p>
					<div class="selectbox">
						<table>
							<tr>
							<!--表示非表示の切り替え　月次-->
								<td id="formYear">日時 &lt;&lt;
									<select name="year">
										<option value="2015">2015</option>
										<option value="2014">2014</option>
										<option value="2013">2013</option>
									</select> 年
								</td>

							<!--表示非表示の切り替え　月次-->
						       	<td id="formMonth">
									<select name="month">
										<?php for($i=1; $i<=12; $i++){?>
										<option value="<?=$i?>"><?=$i?></option>
									<?php }?>
									</select> 月&gt;&gt;
								</td>

							<!--表示非表示の切り替え　週次-->
								<td id="formWeek">
									 第<select name="week">
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
									</select> 週
								</td>

							<!--表示非表示の切り替え　日時-->
								<td id="formDay">
									 <input type="date" name="holiday">
								</td>

							<!--表示非表示の切り替え　期間-->
								<td id="formPeriod">
									 開始期間
									<input type="date" name="startDate">　
									終了期間
									<input type="date" name="endDate">
								</td>
							</tr>
						</table>
表示時間:
            <label><input type="radio" name="work" onclick="formChange();">年次</label>
            <label><input type="radio" name="work" onclick="formChange();" checked="checked">月次</label>
            <label><input type="radio" name="work" onclick="formChange();">週次</label>
            <label><input type="radio" name="work" onclick="formChange();">日時</label>
            <label><input type="radio" name="work" onclick="formChange();">期間</label>
						&nbsp;&nbsp;&nbsp;<input type="submit" value="表示">
					</div>

					<br>
					<p>表示期間 : 20XX年X月XX日 ～ 20XX年X月XX日
					<br>

					<div class="worksheet">
					<form>
						<table>
							<caption><?=$model->getName();?>出勤表</caption>
								<tr class="record">
									<td>日付</td><td>曜日</td><td>出勤</td><td>退勤</td>
									<td>休憩時間</td><td>実働時間</td><td>ステータス</td><td>備考欄</td>
								</tr>

								<?php for($i=0;$i<count($workdata); $i++){
									$datetime = new DateTime($workdata[$i]['day']);
									$week = array('日','月','火','水','木','金','土');
									$w = (int)$datetime->format('w');
								?>
								<tr>
									<td><?=$workdata[$i][0]?></td><td><?=$week[$w]?></td><td><?=$workdata[$i][1]?></td>
									<td><?=$workdata[$i][2]?></td><td>1.0</td><td><?=$workdata[$i][3]/3600?></td>
									<td>
								  	<?php //if(){?>
										<select name="status">
											<option value="1">代休</option>
											<option value="2">代出</option>
											<option value="3">休み</option>
											<option value="4">早退</option>
											<option value="5">遅番</option>
										</select>
									</td>
									<td><textarea name="memo" rows="1" cols="15"></textarea></td>
									<?php //}else{?>
								</tr>
								<?php //}
								}
								?>
						</table>
						<div class="right"><input type="submit" name="execute" value="記録" id="record"></div>
						</form>
						<p class="right">
							<button class="exportExcel">excelに出力</button>　　
							<button class="exportPDF">PDFに出力</button>
						</p>
					</div>
				</div>
			</div>

			<footer class="box footer">
				<p>Copyright © 2010-2015 FusionOne Co.,Ltd. All Rights Reserved.</p>
			</footer>

		</div>
	</body>
</html>
